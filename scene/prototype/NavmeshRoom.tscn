[gd_scene load_steps=17 format=3 uid="uid://cfivue6gcwfy5"]

[ext_resource type="Texture2D" uid="uid://7ly2lf0fa1k" path="res://scene/prototype/texture/kenney/dark/00.png" id="1_rm78j"]
[ext_resource type="Script" path="res://scene/Room.gd" id="1_uau2x"]
[ext_resource type="Texture2D" uid="uid://bx7jeokhy6o38" path="res://scene/prototype/texture/kenney/orange/03.png" id="2_rw2ko"]
[ext_resource type="PackedScene" uid="uid://433rk2i0kijk" path="res://character/test/TestProp.tscn" id="3_o2f8a"]
[ext_resource type="PackedScene" uid="uid://gburrckbovb7" path="res://assets/NPC/Employee.gltf" id="5_a4x31"]
[ext_resource type="PackedScene" uid="uid://4y2uas5rrqh6" path="res://npc/BasicEmployee.tscn" id="5_b7sox"]
[ext_resource type="Script" path="res://npc/NavmeshAgent.gd" id="6_2gfkb"]

[sub_resource type="BoxShape3D" id="BoxShape3D_773ei"]
size = Vector3(3, 1, 2)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_llwin"]
radius = 0.2
height = 1.8

[sub_resource type="NavigationMesh" id="NavigationMesh_di7sb"]
vertices = PackedVector3Array(-2.81195, -0.0760961, -2.61635, -2.61195, -0.0760961, -2.41635, -0.71195, -0.0760961, -2.61635, 1.08805, -0.0760961, -5.11635, -6.71195, -0.0760961, -1.91635, -3.91195, -0.0760961, -1.91635, -3.91195, -0.0760961, -2.31635, -6.71195, -0.0760961, -1.91635, -3.91195, -0.0760961, -2.31635, -3.61195, -0.0760961, -2.61635, 1.08805, -0.0760961, -5.11635, 1.78805, -0.0760961, -5.61635, 1.78805, -0.0760961, -10.4164, -6.71195, -0.0760961, -10.4164, -6.71195, -0.0760961, -1.91635, -3.61195, -0.0760961, -2.61635, -3.61195, -0.0760961, -2.61635, -2.81195, -0.0760961, -2.61635, 1.08805, -0.0760961, -5.11635, 1.98805, -0.0760961, -5.61635, 2.58805, -0.0760961, -4.81635, 6.68805, -0.0760961, -4.81635, 6.68805, -0.0760961, -10.4164, 1.78805, -0.0760961, -10.4164, 1.78805, -0.0760961, -10.4164, 1.78805, -0.0760961, -5.61635, 1.98805, -0.0760961, -5.61635, 0.98805, -0.0760961, -2.61635, 1.48805, -0.0760961, -2.21635, 1.78805, -0.0760961, -2.51635, 0.98805, -0.0760961, -2.61635, 1.78805, -0.0760961, -2.51635, 2.58805, -0.0760961, -2.51635, 2.38805, -0.0760961, -4.31635, 2.88805, -0.0760961, -2.21635, 2.88805, -0.0760961, -1.81635, 6.68805, -0.0760961, -1.81635, 2.38805, -0.0760961, -4.31635, 2.58805, -0.0760961, -2.51635, 2.88805, -0.0760961, -2.21635, 6.68805, -0.0760961, -1.81635, 6.68805, -0.0760961, -4.81635, 2.58805, -0.0760961, -4.81635, 1.48805, -0.0760961, -2.21635, 0.98805, -0.0760961, -2.61635, 0.38805, -0.0760961, -1.91635, 1.48805, -0.0760961, -1.41635, -0.11195, -0.0760961, -1.91635, -2.51195, -0.0760961, -1.51635, -2.81195, -0.0760961, -1.21635, -3.11195, -0.0760961, 1.88365, -0.21195, -0.0760961, 1.88365, 0.28805, -0.0760961, 0.583651, -0.21195, -0.0760961, 1.88365, 0.28805, -0.0760961, 1.18365, 0.28805, -0.0760961, 0.583651, 1.48805, -0.0760961, -1.41635, 0.38805, -0.0760961, -1.91635, -0.11195, -0.0760961, -1.91635, 0.28805, -0.0760961, 0.583651, 0.68805, -0.0760961, 0.0836506, 0.68805, -0.0760961, 0.0836506, 1.68805, -0.0760961, 0.28365, 1.88805, -0.0760961, -1.11635, 1.48805, -0.0760961, -1.41635, -2.81195, -0.0760961, -1.21635, -3.11195, -0.0760961, -1.21635, -3.11195, -0.0760961, 1.88365, -0.71195, -0.0760961, -2.61635, -2.61195, -0.0760961, -2.41635, -2.51195, -0.0760961, -1.51635, -0.11195, -0.0760961, -1.91635, -6.71195, -0.0760961, 2.58365, -4.01195, -0.0760961, 2.58365, -4.01195, -0.0760961, 2.18365, -3.91195, -0.0760961, -1.51635, -3.91195, -0.0760961, -1.91635, -6.71195, -0.0760961, -1.91635, -6.71195, -0.0760961, 2.58365, -4.01195, -0.0760961, 2.18365, -3.71195, -0.0760961, 1.88365, -3.61195, -0.0760961, -1.21635, -3.91195, -0.0760961, -1.51635, -6.71195, -0.0760961, -1.91635, -3.11195, -0.0760961, 1.88365, -3.11195, -0.0760961, -1.21635, -3.61195, -0.0760961, -1.21635, -3.71195, -0.0760961, 1.88365, 2.58805, -0.0760961, -1.11635, 1.88805, -0.0760961, -1.11635, 1.68805, -0.0760961, 0.28365, 2.88805, -0.0760961, -1.41635, 2.58805, -0.0760961, -1.11635, 1.68805, -0.0760961, 0.28365, 3.88805, -0.0760961, 0.78365, 2.88805, -0.0760961, -1.81635, 2.88805, -0.0760961, -1.41635, 3.88805, -0.0760961, 0.78365, 4.28805, -0.0760961, 1.38365, 6.68805, -0.0760961, 1.38365, 6.68805, -0.0760961, -1.81635, 0.68805, -0.0760961, 1.58365, 0.28805, -0.0760961, 1.18365, -0.21195, -0.0760961, 1.88365, 0.18805, -0.0760961, 2.18365, 0.68805, -0.0760961, 1.58365, 0.18805, -0.0760961, 2.18365, 0.18805, -0.0760961, 2.98365, -0.21195, -0.0760961, 3.28365, -0.11195, -0.0760961, 4.08365, 0.58805, -0.0760961, 4.08365, 0.18805, -0.0760961, 2.98365, 0.58805, -0.0760961, 4.08365, 1.78805, -0.0760961, 3.78365, 2.08805, -0.0760961, 3.48365, 3.18805, -0.0760961, 2.18365, 0.68805, -0.0760961, 1.58365, 0.18805, -0.0760961, 2.98365, 0.88805, -0.0760961, 4.58365, 1.78805, -0.0760961, 4.38365, 1.78805, -0.0760961, 3.78365, 0.58805, -0.0760961, 4.08365, 2.08805, -0.0760961, 3.48365, 2.78805, -0.0760961, 3.48365, 3.18805, -0.0760961, 2.18365, 3.88805, -0.0760961, 2.28365, 3.18805, -0.0760961, 2.18365, 2.78805, -0.0760961, 3.48365, 3.88805, -0.0760961, 2.28365, 2.78805, -0.0760961, 3.48365, 3.18805, -0.0760961, 3.98365, 6.68805, -0.0760961, 4.08365, 6.68805, -0.0760961, 1.38365, 4.18805, -0.0760961, 1.98365, 6.68805, -0.0760961, 1.38365, 4.28805, -0.0760961, 1.38365, 4.18805, -0.0760961, 1.98365, -0.51195, -0.0760961, 4.38365, -0.11195, -0.0760961, 4.08365, -0.21195, -0.0760961, 3.28365, -3.71195, -0.0760961, 3.28365, -4.01195, -0.0760961, 2.98365, -4.01195, -0.0760961, 2.58365, -6.71195, -0.0760961, 2.58365, -3.71195, -0.0760961, 3.28365, -4.01195, -0.0760961, 2.98365, -6.71195, -0.0760961, 2.58365, -6.71195, -0.0760961, 10.3837, 0.18805, -0.0760961, 10.3837, -0.51195, -0.0760961, 6.68365, -0.51195, -0.0760961, 6.68365, -0.51195, -0.0760961, 4.38365, -3.71195, -0.0760961, 3.28365, 0.18805, -0.0760961, 10.3837, 0.18805, -0.0760961, 6.98365, -0.21195, -0.0760961, 6.98365, 0.18805, -0.0760961, 10.3837, -0.21195, -0.0760961, 6.98365, -0.51195, -0.0760961, 6.68365, 2.08805, -0.0760961, 4.88365, 1.78805, -0.0760961, 4.38365, 0.88805, -0.0760961, 4.58365, 0.88805, -0.0760961, 6.68365, 6.68805, -0.0760961, 4.08365, 3.18805, -0.0760961, 4.58365, 2.88805, -0.0760961, 4.88365, 2.88805, -0.0760961, 4.88365, 2.08805, -0.0760961, 4.88365, 0.88805, -0.0760961, 6.68365, 2.88805, -0.0760961, 4.88365, 0.88805, -0.0760961, 6.68365, 0.58805, -0.0760961, 6.98365, 0.18805, -0.0760961, 10.3837, 6.68805, -0.0760961, 10.3837, 6.68805, -0.0760961, 4.08365, 0.58805, -0.0760961, 6.98365, 0.18805, -0.0760961, 6.98365, 0.18805, -0.0760961, 10.3837, 6.68805, -0.0760961, 4.08365, 3.18805, -0.0760961, 3.98365, 3.18805, -0.0760961, 4.58365)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(6, 5, 4), PackedInt32Array(9, 8, 7), PackedInt32Array(11, 10, 12), PackedInt32Array(12, 10, 15), PackedInt32Array(12, 15, 14), PackedInt32Array(12, 14, 13), PackedInt32Array(16, 18, 17), PackedInt32Array(20, 19, 21), PackedInt32Array(21, 19, 23), PackedInt32Array(21, 23, 22), PackedInt32Array(26, 25, 24), PackedInt32Array(27, 29, 28), PackedInt32Array(31, 30, 32), PackedInt32Array(32, 30, 33), PackedInt32Array(36, 35, 34), PackedInt32Array(38, 37, 39), PackedInt32Array(39, 37, 42), PackedInt32Array(39, 42, 41), PackedInt32Array(39, 41, 40), PackedInt32Array(44, 43, 45), PackedInt32Array(45, 43, 46), PackedInt32Array(48, 47, 49), PackedInt32Array(49, 47, 52), PackedInt32Array(49, 52, 51), PackedInt32Array(49, 51, 50), PackedInt32Array(54, 53, 55), PackedInt32Array(57, 56, 58), PackedInt32Array(58, 56, 60), PackedInt32Array(58, 60, 59), PackedInt32Array(63, 62, 64), PackedInt32Array(64, 62, 61), PackedInt32Array(67, 66, 65), PackedInt32Array(69, 68, 70), PackedInt32Array(70, 68, 71), PackedInt32Array(74, 73, 72), PackedInt32Array(77, 76, 75), PackedInt32Array(79, 78, 80), PackedInt32Array(80, 78, 81), PackedInt32Array(81, 78, 82), PackedInt32Array(82, 78, 83), PackedInt32Array(85, 84, 86), PackedInt32Array(86, 84, 87), PackedInt32Array(90, 89, 88), PackedInt32Array(92, 91, 93), PackedInt32Array(93, 91, 94), PackedInt32Array(96, 95, 97), PackedInt32Array(97, 95, 98), PackedInt32Array(98, 95, 99), PackedInt32Array(99, 95, 100), PackedInt32Array(104, 103, 101), PackedInt32Array(101, 103, 102), PackedInt32Array(107, 106, 105), PackedInt32Array(108, 111, 109), PackedInt32Array(109, 111, 110), PackedInt32Array(113, 112, 114), PackedInt32Array(114, 112, 117), PackedInt32Array(114, 117, 116), PackedInt32Array(114, 116, 115), PackedInt32Array(119, 118, 120), PackedInt32Array(120, 118, 121), PackedInt32Array(124, 123, 122), PackedInt32Array(127, 126, 125), PackedInt32Array(128, 133, 129), PackedInt32Array(129, 133, 130), PackedInt32Array(130, 133, 131), PackedInt32Array(131, 133, 132), PackedInt32Array(136, 135, 134), PackedInt32Array(138, 137, 139), PackedInt32Array(139, 137, 140), PackedInt32Array(143, 142, 141), PackedInt32Array(145, 144, 146), PackedInt32Array(146, 144, 149), PackedInt32Array(146, 149, 148), PackedInt32Array(146, 148, 147), PackedInt32Array(152, 151, 150), PackedInt32Array(155, 154, 153), PackedInt32Array(158, 157, 156), PackedInt32Array(160, 159, 161), PackedInt32Array(161, 159, 162), PackedInt32Array(165, 164, 163), PackedInt32Array(168, 167, 166), PackedInt32Array(170, 169, 171), PackedInt32Array(171, 169, 172), PackedInt32Array(172, 169, 174), PackedInt32Array(172, 174, 173), PackedInt32Array(177, 176, 175), PackedInt32Array(180, 179, 178)]
cell_size = 0.1
cell_height = 0.01
agent_radius = 0.4

[sub_resource type="BoxShape3D" id="BoxShape3D_o5ev8"]
size = Vector3(0.5, 0.5, 0.5)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_agkml"]
albedo_texture = ExtResource("2_rw2ko")
uv1_triplanar = true
uv1_world_triplanar = true

[sub_resource type="BoxMesh" id="BoxMesh_vqdp5"]
material = SubResource("StandardMaterial3D_agkml")
size = Vector3(0.5, 0.5, 0.5)

[sub_resource type="BoxShape3D" id="BoxShape3D_lf3p8"]
size = Vector3(10, 1, 10)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_nwg6f"]
albedo_texture = ExtResource("1_rm78j")
uv1_triplanar = true
uv1_world_triplanar = true

[sub_resource type="BoxMesh" id="BoxMesh_8o3uq"]
material = SubResource("StandardMaterial3D_nwg6f")
size = Vector3(10, 1, 10)

[node name="NavmeshRoom" type="Node3D" node_paths=PackedStringArray("prop_order", "finish_area")]
script = ExtResource("1_uau2x")
prop_order = [NodePath("TestProp")]
finish_area = NodePath("FinishArea")

[node name="TestProp" parent="." instance=ExtResource("3_o2f8a")]
transform = Transform3D(-0.141817, 0, -0.989893, 0, 1, 0, 0.989893, 0, -0.141817, -5.47763, 0.805671, 3.94224)
speed = 5.0

[node name="FinishArea" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.835262, 0.818032, -6.31511)
collision_mask = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="FinishArea"]
shape = SubResource("BoxShape3D_773ei")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.947315, 0.233943, -0.218782, -0.116376, 0.887752, 0.445368, 0.298414, -0.396443, 0.868206, 0, 3.14195, -5.71476)

[node name="Employee" parent="." instance=ExtResource("5_a4x31")]
transform = Transform3D(-0.5, 0, -0.866025, 0, 1, 0, 0.866025, 0, -0.5, -1.20909, 0.502358, -2.76638)

[node name="NavmeshAgent" type="CharacterBody3D" parent="."]
transform = Transform3D(-0.707107, 0, 0.707107, 0, 1, 0, -0.707107, 0, -0.707107, -2.81328, 1.07682, 3.94924)
floor_block_on_wall = false
script = ExtResource("6_2gfkb")
speed = 3.0
loop = false

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="NavmeshAgent"]

[node name="BasicEmployee" parent="NavmeshAgent" instance=ExtResource("5_b7sox")]

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavmeshAgent"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.885937, 0)
shape = SubResource("CapsuleShape3D_llwin")

[node name="Patrol" type="Node" parent="NavmeshAgent"]

[node name="point 1" type="Marker3D" parent="NavmeshAgent/Patrol"]
transform = Transform3D(-0.5, 0, -0.866025, 0, 1, 0, 0.866025, 0, -0.5, -1.95755, 0.502358, 9.5046)

[node name="point 2" type="Marker3D" parent="NavmeshAgent/Patrol"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.01781, 0.782696, 6.98184)

[node name="point 3" type="Marker3D" parent="NavmeshAgent/Patrol"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.342398, 0.66885, 7.14791)

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.596496, 0)
navigation_mesh = SubResource("NavigationMesh_di7sb")

[node name="OBSTACLES" type="Node3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.596496, 0)

[node name="Box11" type="StaticBody3D" parent="NavigationRegion3D/OBSTACLES"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.45524, 0.75, 4.21318)
metadata/_edit_group_ = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/OBSTACLES/Box11"]
shape = SubResource("BoxShape3D_o5ev8")

[node name="MeshInstance" type="MeshInstance3D" parent="NavigationRegion3D/OBSTACLES/Box11"]
mesh = SubResource("BoxMesh_vqdp5")
skeleton = NodePath("../../../Floor")

[node name="Box12" type="StaticBody3D" parent="NavigationRegion3D/OBSTACLES"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.17016, 0.75, -1.77561)
metadata/_edit_group_ = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/OBSTACLES/Box12"]
shape = SubResource("BoxShape3D_o5ev8")

[node name="MeshInstance" type="MeshInstance3D" parent="NavigationRegion3D/OBSTACLES/Box12"]
mesh = SubResource("BoxMesh_vqdp5")
skeleton = NodePath("../../../Floor")

[node name="Box13" type="StaticBody3D" parent="NavigationRegion3D/OBSTACLES"]
transform = Transform3D(-0.240313, 0, -6.00034, 0, 1, 0, 0.970696, 0, -1.48549, 2.26625, 0.75, 1.17873)
metadata/_edit_group_ = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/OBSTACLES/Box13"]
shape = SubResource("BoxShape3D_o5ev8")

[node name="MeshInstance" type="MeshInstance3D" parent="NavigationRegion3D/OBSTACLES/Box13"]
mesh = SubResource("BoxMesh_vqdp5")
skeleton = NodePath("../../../Floor")

[node name="Box14" type="StaticBody3D" parent="NavigationRegion3D/OBSTACLES"]
transform = Transform3D(6.71461, 0, 0, 0, 4.54598, 0, 0, 0, 1.0034, -1.92843, 0.75, 2.55638)
metadata/_edit_group_ = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/OBSTACLES/Box14"]
shape = SubResource("BoxShape3D_o5ev8")

[node name="MeshInstance" type="MeshInstance3D" parent="NavigationRegion3D/OBSTACLES/Box14"]
mesh = SubResource("BoxMesh_vqdp5")
skeleton = NodePath("../../../Floor")

[node name="Box15" type="StaticBody3D" parent="NavigationRegion3D/OBSTACLES"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 3.96024, 0.225782, 0.75, 5.51541)
metadata/_edit_group_ = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/OBSTACLES/Box15"]
shape = SubResource("BoxShape3D_o5ev8")

[node name="MeshInstance" type="MeshInstance3D" parent="NavigationRegion3D/OBSTACLES/Box15"]
mesh = SubResource("BoxMesh_vqdp5")
skeleton = NodePath("../../../Floor")

[node name="Box16" type="StaticBody3D" parent="NavigationRegion3D/OBSTACLES"]
transform = Transform3D(0.783574, 0, -3.95834, 0, 17.0384, 0, 0.621298, 0, 4.99221, 0.960413, 0.75, -3.74745)
metadata/_edit_group_ = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/OBSTACLES/Box16"]
shape = SubResource("BoxShape3D_o5ev8")

[node name="MeshInstance" type="MeshInstance3D" parent="NavigationRegion3D/OBSTACLES/Box16"]
mesh = SubResource("BoxMesh_vqdp5")
skeleton = NodePath("../../../Floor")

[node name="Box17" type="StaticBody3D" parent="NavigationRegion3D/OBSTACLES"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.24603, 0.75, -1.93207)
metadata/_edit_group_ = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/OBSTACLES/Box17"]
shape = SubResource("BoxShape3D_o5ev8")

[node name="MeshInstance" type="MeshInstance3D" parent="NavigationRegion3D/OBSTACLES/Box17"]
mesh = SubResource("BoxMesh_vqdp5")
skeleton = NodePath("../../../Floor")

[node name="Floor" type="StaticBody3D" parent="NavigationRegion3D"]
transform = Transform3D(1.42239, 0, 0, 0, 1.00472, 0, 0, 0, 2.16327, 0, -0.596496, 0)
metadata/_edit_group_ = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/Floor"]
shape = SubResource("BoxShape3D_lf3p8")

[node name="MeshInstance" type="MeshInstance3D" parent="NavigationRegion3D/Floor"]
mesh = SubResource("BoxMesh_8o3uq")
skeleton = NodePath("")
